<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <META HTTP-EQUIV="REFRESH" CONTENT="10">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.2.0/foundation.min.css">
  <link rel="stylesheet" href="./css/main.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.2.0/foundation.min.js"></script>


  <title>Yahoo Currency Reports</title>
</head>

<body>
  <header>
    <div class="title">
      <h1> Yahoo Currency Rates </h1>
      <p class="description">
        Stock Quotes from Yahoo Finance: A media property that is part of Yahoo!'s network. It provides financial news, data and commentary including stock quotes, press releases, financial reports, and original programming. It also offers some online tools for
        personal finance management.
      </p>
    </div>

    <div id="symbol" class="small-2 large-4 columns">
      <h2>Currency Symbol</h2>

    </div>
    <div id="time" class="small-2 large-4 columns">
      <h2>Time</h2>
    </div>
    <div id="price" class="small-2 large-4 columns">
      <h2> Currency Price</h2>
      <p id=p rice>

      </p>
    </div>

  </header>
  <script type="text/javascript">
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", "http://localhost:8001/getstring", true);
    xmlhttp.onreadystatechange = function() {
      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        string = xmlhttp.responseText;
        to_json = JSON.parse(string);
        data = to_json.list.resources;
        var currency_symbol = document.getElementById("symbol");
        var currency_price = document.getElementById("price");
        var currency_time = document.getElementById("time");

        for (i = 0; i < data.length; i++) {
          symbol_heading = document.createElement('h3');
          time_heading = document.createElement('h3');
          price_heading = document.createElement('h3');
          symbol = document.createTextNode(JSON.stringify(data[i].resource.fields.name).replace(/['"]+/g, '') + "\n");
          time = document.createTextNode(JSON.stringify(data[i].resource.fields.utctime).replace(/['"]+/g, '') + "\n");
          price = document.createTextNode(JSON.stringify(data[i].resource.fields.price).replace(/['"]+/g, '') + "\n");
          symbol_heading.appendChild(symbol);
          time_heading.appendChild(time);
          price_heading.appendChild(price);
          currency_symbol.appendChild(symbol_heading);
          currency_price.appendChild(price_heading);
          currency_time.appendChild(time_heading);


        }
      }
    }
    xmlhttp.send();
  </script>

</body>

</html>
